{% extends "base.html" %}

{% block content %}
<div class="container" style="margin-top: 150px;">    
  <main>
    <div class="py-5 text-center">
      <h2>Корзина</h2>
    </div>

    <div class="row g-5">
      <div class="col-md-5 col-lg-4 order-md-last">
        <h4 class="d-flex justify-content-between align-items-center mb-3">
          <span class="text-primary">Подсчет</span>
          <span class="badge bg-primary rounded-pill">{{ count }}</span>
        </h4>
        <ul class="list-group mb-3">
          {% for item in items %}
              <li class="list-group-item d-flex justify-content-between lh-sm">
                <div>
                  <h6 class="my-0">{{ item.name }}</h6>
                </div>
                <span class="text-muted">{{ item.price }} ₽</span>
              </li>
          {% endfor %}

          <li class="list-group-item d-flex justify-content-between">
            <span>Total (RUB)</span>
            <strong>{{ total }} ₽</strong>
          </li>
          <button onclick="window.location.href = '/buy/' + {{ total }}" class="w-100 btn btn-primary btn-lg" type="submit">Перейти к оплате</button>
        </ul>
      </div>


      <div class="col-md-7 col-lg-8 d-flex" style="display: flex; flex-wrap:wrap;">
          {% if items %}
              {% for prod in items %}     
                    <div class="col-5">
                        <br><br>
                        <div class="card shadow-sm" > 
                            <img class="bd-placeholder-img card-img-top " width="100%" height="225" src="{{ url_for('static', filename='img/downloads/' + prod.photo) }}" />
                            <div class="card-body">
                                <p class="card-text font-weight-bold">{{ prod.name }} </p>
                                <p class="card-text"> Описание:{{ prod.desc }} </br> Осталось:{{ prod.count }} </br> Цена:{{ prod.price }}.р</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <div class="btn-group">
                                        <button type="button" onclick="window.location.href = '/info/' + {{ prod.id }}" class="btn btn-sm btn-outline-info">Просмотр</button>
                                        <button type="button" onclick="window.location.href = '/del/' + {{prod.id}}" class="btn btn-sm btn-outline-danger">Удалить</button>
                                    </div>
                                    <small class="text-muted"><i class="fas fa-eye"></i> {{ prod.views }} </small>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
                {% else %}
                <h3 class="md-5"> <br><br>Корзина пуста :(<br><br></h3>
                {% endif %}
            </div> 
      </div>
    </div>
  </main>
</div>  
{% endblock %}